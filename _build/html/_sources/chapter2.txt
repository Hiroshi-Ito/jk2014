================
X Window
================

実習内容
================
#. X Window システムの理解
#. ウインドウの操作
#. GNOME 端末の操作

課題
================
他のウインドウで完全に隠されたウインドウを見つけて、最前面に表示させる方法についてレポートにまとめなさい。

実習の手順
================
解説を参考にしながら実習を進めて下さい。


X Windowの操作
---------------
X Window のデスクトップ環境（GUI, 解説参照）として、現在のシステムではGNOMEと呼ばれるソフトウェアを用いています。GNOMEは多くの機能を持ちますが、ここではごく基本的な機能について説明します。

UNIX の特徴として、種々の設定が容易に変更できることが挙げられます。
X Window に関しても、システムを使いやすくする目的で設定が変更されることが頻繁に起きます。従って、画面表示が説明と多少異なっても気にせず、大づかみに機能を理解するようにして下さい。





**用語の説明**
    最初に、説明で使う言葉の意味を列挙しておきます。

**マウスボタンの操作**
    マウスボタンには以下のように数種類の操作法があります。
        **プッシュ**
            単に押すこと。以下の説明では、「押す」という言葉で表します。
        **リリース**
            単に離すこと。以下の説明では、「離す」という言葉で表します。
        **クリック**
            マウスカーソルを移動させずに同じ位置でボタンを押して離すこと。（Windows で多用する「ダブルクリック」は瞬間的に２回クリックすることです。X Window ではダブルクリックはほとんど使いませんので注意してください。)
        **ドラッグ**
            ボタンを押しながら、マウスを移動させること。


**ウィンドウの部分の名前***
    画面内の各部分は以下のように呼ばれます(図2.1、2.2)。

    .. figure:: chapter2_img/desktop-layout12.png
     :width: 70%
     :align: center

     **図 2.1**: デスクトップの各部分の名前


    .. figure:: chapter2_img/window-layout12.png
     :width: 70%
     :align: center
     
     **図 2.2**: window の各部分の名前


    **メニューバー** : 
        画面最上部の、メニューが配置された部分。

    **ルートウィンドウ** : 
        画面中央部の、全てのウィンドウの背景にあたる部分。

    **タスクバー** : 
        画面最上部の、ウィンドウのアイコン（後述）が表示される部分。

    **ウィンドウ** : 
        個々のクライアントプロセス（解説参照）に対応する描画範囲。通常は長方形。

    **タイトルバー** : 
        ウィンドウの上部にある色のついた部分。

    **アプリケーションボタン** :
        タイトルバー左端の四角い部分。

    **ミニマイズボタン** : 
        タイトルバー右端左部の四角い部分（"−"記号）。

    **マキシマイズボタン** : 
        タイトルバー右端中央の四角い部分（"□"記号）。

    **クローズボタン** : 
        タイトルバー右端右部の四角い部分（"Ｘ"記号）。

    **ボーダ** :
        ウィンドウ四辺の縁。

    **マウスカーソル** : 
        マウスによって画面上で移動するマーク。状況に応じて形が変化する。



    .. figure:: chapter2_img/focus-defocus12.png
     :width: 70%
     :align: center

     **図 2.3**: windowの状態


**状態**
    ウィンドウの状態としては以下の用語を用います。

    **フォーカスされている** :
        そのウィンドウが選択されており、キーボードやマウスからの入力が受け付けられる状態。同時に複数のウィンドウがフォーカスされることはない。ここでの設定では、マウスカーソルがウィンドウ内に入った状態でクリックされたときにフォーカスされ、フォーカスされるとタイトルバーと、ボーダーの色が変化する。

    **最前面に表示** :
        ウィンドウが重なっている場合、他のどのウィンドウによっても隠されていない状態を「最前面に表示されている」と言う。

    **最背面に表示** :
        ウィンドウが重なっている場合、ルートウィンドウ以外の他のどのウィンドウよりも後に表示されている状態を「最背面に表示されている」と言う。



**ウィンドウの基本操作**

  **アイコン化**:
      ウィンドウの表示を消し、代わりとなる小さな絵記号（アイコン）を表示することを指します。
      現在のシステムでは、ウィンドウのアイコンは常にタスクバー内に表示されています(図 2.4)。
      マウスカーソルをミニマイズボタンの上に移動させ、マウスの左ボタンをクリックすると、そのウィンドウが消え、表示はアイコンのみとなります。
      このアイコンは使用していないウィンドウを小さく表示して画面を整理するためのものです。Windows のアイコンは、コマンドやファイルに対応しますが、
      この場合のアイコンは、クライアントプロセスに対応することに注意してください。

    .. figure:: chapter2_img/iconified12.png
     :width: 70%
     :align: center

     **図 2.4**: タスクバー内のアイコン


  **ウィンドウの復元**:
      アイコンの上にマウスカーソルを移動し、左ボタンをクリックすると、アイコンが消え、元のウィンドウが元の位置に現れます。このときのウィンドウは最前面に表示され、他のウィンドウと重なる場合はそれらを隠します。

  **大きさの変更**:
      ボーダの上にマウスカーソルを移動させ、左ボタンでドラッグすると、ウィンドウのサイズが変ります。

  **位置の変更**:
      タイトルバーをマウスの左ボタンでドラッグするとウィンドウを移動することができます。タイトルバー上で左ボタンを押した時点で、そのウィンドウは最前面に表示されます。

  **最前面に表示**:
   最前面に表示されていないウィンドウの上でマウスを左クリックすると、そのウィンドウが最前面に表示され、他のウィンドウを隠します。



**ウィンドウメニューの実行**
  ウィンドウのアプリケーションボタンを押すと、図 2.
  5のようなメニュー画面が表示されます。ウィンドウの最大化、最小化、最前面表示、移動、サイズの変更などは、このメニューを選択して行なうことも出来ます。

    .. figure:: chapter2_img/menu12.png
     :width: 30%
     :align: center

     **図 2.5**: メニューの画面  


**コピー＆ペースト**
    これは、文字列の切り貼りです。例えば、GNOME端末を2つ開いておき、片方の端末で実行したコマンドをもう一方の端末で実行するとき、キーボードから同じコマンドを入力するのが面倒なときなどに使います。

    **コピー**
        コピーしたい文字列の先頭にマウスカーソルを移動させ、左ボタンでドラッグしてコピーしたい位置の最後まで移動して、ボタンを離します。コピーした部分の文字列は白黒が反転して表示されます。ウィンドウの右端まで色の反転が起きた場合には、Enterキーを押したときに入力される「改行文字」もコピーされます。複数行のコピーも可能です。
    
    **ペースト**
        貼り付けたいウィンドウに移動してマウスの中央ボタンを押すと、コピーした内容の貼り付けが行えます。クライアントによって多少は異りますが、GNOME 端末の場合、貼り付けは「キーボードからの入力」と同じに扱われます。したがって、コピーした内容に改行文字が含まれている場合、貼り付けと同時にその内容が実行されてしまいます。

    この機能は、異るクライアント間でも行えることがほとんどですが、漢字などの全角文字の貼り付けが行えないケースもありますので注意して下さい。





X Windowの概要
================
X Window は、現在のコンピュータでは常識となった、GUI(Graphical User Intrface)を実現するためのソフトウエアシステムです。このGUIによって、画面上にあたかも、紙がばらばらと置かれているかのような状態で、紙を読んだり、紙に書いたりといった操作が行え、直感的にも分かりやすい操作が行えます。この紙に相当するのが、ウィンドウであり、複数のウィンドウを操作できるGUIをマルチウィンドウシステムともいいます。

    .. figure:: chapter2_img/Xmech.png
     :width: 30%
     :align: center

     **図 2.6**: X window の構成  


もともと、Unix は文字だけを表示する端末を想定して開発されていたため、マイクロソフトのWindowsのように、オペレーティングシステムそのものの中にマルチウィンドウ機能が組み込まれているわけではなく、X Window はオペレーティングシステムとは独立したソフトウエアとして開発されています。したがって、GUIを削除した状態でも、UNIXはきちんと動作するので、家電製品やロボットなどGUIを必要としない機器への組み込み用オペレーティングシステムとして利用することができます。

    .. figure:: chapter2_img/Xmech2.png
     :width: 50%
     :align: center

     **図 2.7**: ネットワークを介したX window のりよう  


また、図に示すようにX Window では表示を受け持つ「サーバ」が、個々のウインドウに対応する「クライアント」と通信を行って表示をするように設計されているため、例えば自分の使っているコンピュータに作図用のプログラムが
無くても、別のコンピュータ上の作図用クライアントを動作させれば、あたかも自分の使っているコンピュータ上で作図プログラムが動いているように使うことができます。このX Windowのサーバは Windows 上で動くものもあり、この機能を使えば Windows から UNIX のクライアントを動かすといったことも実現できます。

では、Xサーバが表示している個々のウィンドウを、移動させたり、手前に持ってきたり、サイズを変えたり、という操作はどのプロセスが行っているのでしょうか?これは、ウィンドウマネージャという特別なクライアントが、マウスの移動や、ボタンのクリックなどの「イベント」を見張っており、それに応じて個々のウィンドウの状態を変えているのです。

このように、オペレーティングシステムと独立に設計されたX Window システムは、ネットワークを介した利用ができることや、ウィンドウマネージャを入
れ換えたり、その動作を自分の好みに合わせて使うなどのことができるようになっており、非常に自由度が高いマルチウィンドウ環境を提供してくれます。

